<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Edit Donor</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="d-flex flex-column min-vh-100 bg-light">

<nav class="navbar navbar-dark bg-dark px-4">
  <a class="navbar-brand" href="/dashboard">Donor App</a>
  <a href="/logout" class="btn btn-sm btn-danger">Logout</a>
</nav>

<main class="flex-fill">
<div class="container my-4">

<div class="card shadow-sm mx-auto" style="max-width:600px;">
<div class="card-header bg-dark text-white">
<h5 class="mb-0">Edit Donor</h5>
</div>

<div class="card-body">

<form id="editForm" method="POST">

<input class="form-control mb-3" name="first_name" required>
<input class="form-control mb-3" name="last_name" required>
<input type="email" class="form-control mb-3" name="email">
<input class="form-control mb-3" name="city">
<input class="form-control mb-3" name="state">
<textarea class="form-control mb-3" name="remarks"></textarea>

<div class="d-flex justify-content-between">
<button class="btn btn-success">Update Donor</button>
<a href="/donors-page" class="btn btn-secondary">Cancel</a>
</div>

</form>

</div>
</div>

</div>
</main>

<script>
const params = new URLSearchParams(window.location.search);
const id = params.get("id");

fetch(`/donors/${id}`)
.then(res => res.json())
.then(data => {

  document.querySelector('[name="first_name"]').value = data.first_name;
  document.querySelector('[name="last_name"]').value = data.last_name;
  document.querySelector('[name="email"]').value = data.email || '';
  document.querySelector('[name="city"]').value = data.city || '';
  document.querySelector('[name="state"]').value = data.state || '';
  document.querySelector('[name="remarks"]').value = data.remarks || '';

  document.getElementById("editForm").action = `/donors/update/${id}`;
});
</script>

</body>
</html>
