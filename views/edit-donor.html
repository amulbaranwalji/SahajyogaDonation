<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Edit Donor</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
.card-custom {
  border-radius: 18px;
}
.form-control:focus {
  border-color: #F32B56;
  box-shadow: 0 0 0 0.2rem rgba(243, 43, 86, 0.25);
}
.btn-primary {
  background-color: #F32B56;
  border: none;
}
.btn-primary:hover {
  background-color: #d92148;
}
</style>
</head>

<body class="bg-light d-flex flex-column min-vh-100">

<!-- NAVBAR -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark px-4">
  <a class="navbar-brand d-flex align-items-center" href="/dashboard">
    <img src="/images/logo.png" width="40" height="40" class="me-2">
    Donor App
  </a>

  <div class="ms-auto dropdown">
    <a class="text-white dropdown-toggle text-decoration-none"
       href="#" data-bs-toggle="dropdown">Welcome</a>
    <ul class="dropdown-menu dropdown-menu-end">
      <li><a class="dropdown-item" href="/profile-page">View Profile</a></li>
      <li><hr class="dropdown-divider"></li>
      <li><a class="dropdown-item text-danger" href="/logout">Logout</a></li>
    </ul>
  </div>
</nav>

<main class="flex-fill">
<div class="container my-5">

<div class="card shadow-lg card-custom mx-auto" style="max-width:600px;">
<div class="card-header bg-dark text-white">
<h5 class="mb-0">Edit Donor</h5>
</div>

<div class="card-body">

<form id="editForm" method="POST">

<div class="mb-3">
<label class="form-label">First Name</label>
<input type="text" name="first_name" id="first_name"
class="form-control" required>
</div>

<div class="mb-3">
<label class="form-label">Last Name</label>
<input type="text" name="last_name" id="last_name"
class="form-control" required>
</div>

<div class="mb-3">
<label class="form-label">Email</label>
<input type="email" name="email" id="email"
class="form-control">
</div>

<div class="mb-3">
<label class="form-label">City</label>
<input type="text" name="city" id="city"
class="form-control">
</div>

<div class="mb-3">
<label class="form-label">State</label>
<input type="text" name="state" id="state"
class="form-control">
</div>

<div class="mb-3">
<label class="form-label">Remarks</label>
<textarea name="remarks" id="remarks"
class="form-control"></textarea>
</div>

<div class="d-flex justify-content-between">
<button type="submit" class="btn btn-primary">Update Donor</button>
<a href="/donors-page" class="btn btn-secondary">Cancel</a>
</div>

</form>

</div>
</div>

</div>
</main>

<footer class="bg-dark text-white text-center py-3 mt-auto">
Â© 2026 Donor App | Powered By KREYA IT CONSULTING LTD
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script>

// Get donor ID from URL
const donorId = window.location.pathname.split("/").pop();

// Set form action
document.getElementById("editForm").action =
  `/donors/update/${donorId}`;

// Load donor data
fetch(`/donors/${donorId}`)
.then(res => res.json())
.then(data => {

  document.getElementById("first_name").value = data.first_name || "";
  document.getElementById("last_name").value = data.last_name || "";
  document.getElementById("email").value = data.email || "";
  document.getElementById("city").value = data.city || "";
  document.getElementById("state").value = data.state || "";
  document.getElementById("remarks").value = data.remarks || "";

})
.catch(err=>{
  console.error("Error loading donor:", err);
  alert("Unable to load donor data");
});

</script>

</body>
</html>
